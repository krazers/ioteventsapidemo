(this["webpackJsonpreact-amplified"]=this["webpackJsonpreact-amplified"]||[]).push([[13],{484:function(t,e,n){"use strict";n.r(e),n.d(e,"amplify_authenticator",(function(){return d}));var a=n(113),r=n(31),i=n(116),o=n(541),s=n(540),u=n(25),c=n(64),f=function(t,e,n,a){return new(n||(n=Promise))((function(r,i){function o(t){try{u(a.next(t))}catch(e){i(e)}}function s(t){try{u(a.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((a=a.apply(t,e||[])).next())}))},l=function(t,e){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(s){i=[6,s],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},h=new r.a("Authenticator"),d=function(){function t(t){var e=this;Object(a.f)(this,t),this.initialAuthState=o.a.SignIn,this.authState=o.a.Loading,this.toastMessage="",this.onAuthStateChange=function(t,n){if(void 0===t)return h.info("nextAuthState cannot be undefined");h.info("Inside onAuthStateChange Method current authState:",e.authState),t===o.a.SignedOut?e.authState=e.initialAuthState:e.authState=t,void 0!==n&&(e.authData=n,h.log("Auth Data was set:",e.authData)),h.info("authState has been updated to "+e.authState)}}return t.prototype.componentWillLoad=function(){return f(this,void 0,void 0,(function(){var t,e=this;return l(this,(function(n){switch(n.label){case 0:return i.a.listen(s.a,(function(t){var n=t.payload,a=n.event,r=n.data;switch(a){case"cognitoHostedUI":return e.onAuthStateChange(o.a.SignedIn,r);case"cognitoHostedUI_failure":case"parsingUrl_failure":case"signOut":case"customGreetingSignOut":return e.onAuthStateChange(o.a.SignIn,null)}})),i.a.listen(s.h,(function(t){var n=t.payload;switch(n.event){case s.g:n.message&&(e.toastMessage=n.message);break;case s.i:n.message&&(e.onAuthStateChange(n.message,n.data),e.toastMessage="");break;default:h.warn("Unhandled Auth Event",n.event)}})),Object(u.j)("amplify-authenticator"),t=localStorage.getItem(s.f),localStorage.removeItem(s.f),"true"===t?[3,2]:[4,this.checkUser()];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.checkUser=function(){return f(this,void 0,void 0,(function(){var t,e,n;return l(this,(function(a){switch(a.label){case 0:if(!c.a||"function"!==typeof c.a.currentAuthenticatedUser)throw new Error(s.d);a.label=1;case 1:return a.trys.push([1,3,,9]),[4,c.a.currentAuthenticatedUser()];case 2:return t=a.sent(),this.onAuthStateChange(o.a.SignedIn,t),[3,9];case 3:a.sent(),e=null;try{e=localStorage.getItem(s.j)}catch(r){h.debug("Failed to get the auth state from local storage",r)}a.label=4;case 4:return a.trys.push([4,7,,8]),e!==o.a.SignedIn?[3,6]:[4,c.a.signOut()];case 5:a.sent(),a.label=6;case 6:return this.onAuthStateChange(this.initialAuthState),[3,8];case 7:return n=a.sent(),h.debug("Failed to sign out",n),[3,8];case 8:return[3,9];case 9:return[2]}}))}))},t.prototype.renderAuthComponent=function(t){switch(t){case o.a.SignIn:return Object(a.e)("slot",{name:"sign-in"},Object(a.e)("amplify-sign-in",{federated:this.federated,usernameAlias:this.usernameAlias}));case o.a.ConfirmSignIn:return Object(a.e)("slot",{name:"confirm-sign-in"},Object(a.e)("amplify-confirm-sign-in",{user:this.authData}));case o.a.SignUp:return Object(a.e)("slot",{name:"sign-up"},Object(a.e)("amplify-sign-up",{usernameAlias:this.usernameAlias}));case o.a.ConfirmSignUp:return Object(a.e)("slot",{name:"confirm-sign-up"},Object(a.e)("amplify-confirm-sign-up",{user:this.authData,usernameAlias:this.usernameAlias}));case o.a.ForgotPassword:return Object(a.e)("slot",{name:"forgot-password"},Object(a.e)("amplify-forgot-password",{usernameAlias:this.usernameAlias}));case o.a.ResetPassword:return Object(a.e)("slot",{name:"require-new-password"},Object(a.e)("amplify-require-new-password",{user:this.authData}));case o.a.VerifyContact:return Object(a.e)("slot",{name:"verify-contact"},Object(a.e)("amplify-verify-contact",{user:this.authData}));case o.a.TOTPSetup:return Object(a.e)("slot",{name:"totp-setup"},Object(a.e)("amplify-totp-setup",{user:this.authData}));case o.a.Loading:return Object(a.e)("slot",{name:"loading"},Object(a.e)("div",null,"Loading..."));case o.a.SignedIn:return[Object(a.e)("slot",{name:"greetings"}),Object(a.e)("slot",null)];default:throw new Error("Unhandled auth state: "+t)}},t.prototype.componentDidUnload=function(){var t=this;i.a.remove(s.h,(function(e){var n=e.payload;n.event===s.g&&n.message&&(t.toastMessage=n.message)}))},t.prototype.render=function(){var t=this;return Object(a.e)(a.a,null,this.toastMessage?Object(a.e)("amplify-toast",{message:this.toastMessage,handleClose:function(){t.toastMessage=""},"data-test":"authenticator-error"}):null,this.renderAuthComponent(this.authState))},t}()},540:function(t,e,n){"use strict";n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return g})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return A})),n.d(e,"h",(function(){return y})),n.d(e,"i",(function(){return O})),n.d(e,"j",(function(){return h})),n.d(e,"k",(function(){return m})),n.d(e,"l",(function(){return S})),n.d(e,"m",(function(){return u})),n.d(e,"n",(function(){return o})),n.d(e,"o",(function(){return p})),n.d(e,"p",(function(){return b})),n.d(e,"q",(function(){return f})),n.d(e,"r",(function(){return i})),n.d(e,"s",(function(){return s})),n.d(e,"t",(function(){return a}));var a="username",r="email",i="code",o="phone",s="password",u="country-dial-code-select",c="+1",f="amplify-auth-source",l="amplify-signin-with-hostedUI",h="amplify-authenticator-authState",d="Phone number can not be empty",g="No Auth module found, please ensure @aws-amplify/auth is imported",p="SETUP_TOTP",m="User has not set up software token mfa",S="User has not verified software token mfa",b="SUCCESS",w="auth",y="UI Auth",A="ToastAuthError",O="AuthStateChange"},541:function(t,e,n){"use strict";var a,r,i,o,s;n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return o})),function(t){t.SignUp="signup",t.SignOut="signout",t.SignIn="signin",t.Loading="loading",t.SignedOut="signedout",t.SignedIn="signedin",t.SigningUp="signingup",t.ConfirmSignUp="confirmSignUp",t.confirmingSignUpCustomFlow="confirmsignupcustomflow",t.ConfirmSignIn="confirmSignIn",t.confirmingSignInCustomFlow="confirmingsignincustomflow",t.VerifyingAttributes="verifyingattributes",t.ForgotPassword="forgotpassword",t.ResetPassword="resettingpassword",t.SettingMFA="settingMFA",t.TOTPSetup="TOTPSetup",t.CustomConfirmSignIn="customConfirmSignIn",t.VerifyContact="verifyContact"}(a||(a={})),function(t){t.TOTP="TOTP",t.SMS="SMS",t.NOMFA="NOMFA"}(r||(r={})),function(t){t.SoftwareTokenMFA="SOFTWARE_TOKEN_MFA",t.SMSMFA="SMS_MFA",t.NewPasswordRequired="NEW_PASSWORD_REQUIRED",t.MFASetup="MFA_SETUP",t.CustomChallenge="CUSTOM_CHALLENGE"}(i||(i={})),function(t){t.Password="password"}(o||(o={})),function(t){t.username="username",t.email="email",t.phone_number="phone_number"}(s||(s={}))}}]);
//# sourceMappingURL=13.2ee0dcbe.chunk.js.map