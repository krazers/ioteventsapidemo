{"ast":null,"code":"var _jsxFileName = \"/home/ec2-user/environment/react-amplified/src/App.js\";\nimport _ from 'lodash';\nimport React, { Component } from 'react';\nimport logo from \"./logo.svg\";\nimport Amplify, { API, graphqlOperation, Auth } from 'aws-amplify';\nimport './App.css';\nimport awsmobile from './aws-exports';\nimport { render } from \"react-dom\";\nimport { Bootstrap } from 'a-theme-react';\nimport delay from 'delay';\nimport { AmplifyAuthenticator, withAuthenticator, AmplifySignOut } from '@aws-amplify/ui-react';\nimport { Button, Input, List, Label, Icon, Form, Grid, Header, Image, Message, Segment, Dropdown } from 'semantic-ui-react';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = (e, {\n      value\n    }) => {\n      this.setState({\n        value: value\n      });\n    };\n\n    this.handleTemplateChange = (e, {\n      value\n    }) => {\n      this.setState({\n        template: value\n      });\n    };\n\n    this.handleTopicChange = (e, {\n      value\n    }) => {\n      this.setState({\n        topic: value\n      });\n    };\n\n    this.handleModelNameChange = (e, {\n      value\n    }) => {\n      this.setState({\n        modelname: value\n      });\n    };\n\n    this.handleTimeoutChange = (e, {\n      value\n    }) => {\n      this.setState({\n        timeout: value\n      });\n    };\n\n    this.handleEventModelChange = (e, {\n      value\n    }) => {\n      this.setState({\n        viewmodelname: value\n      });\n      this.loadDetectorInstances(value);\n    };\n\n    this.handleEventModelIdChange = (e, {\n      value\n    }) => {\n      this.setState({\n        modelUniqueId: value\n      });\n    };\n\n    this.handleClickRefresh = (e, {\n      value\n    }) => {\n      this.loadDetectorInstances(this.state.viewmodelname);\n    };\n\n    this.handleEventModelRemoveChange = (e, {\n      value\n    }) => {\n      this.setState({\n        deletemodelname: value\n      });\n    };\n\n    this.handleClickRemove = (e, {\n      value\n    }) => {\n      this.removeEventModel(this.state.deletemodelname);\n    };\n\n    this.handleClickAdd = async () => {\n      try {\n        console.log(\"Adding now...\");\n        const path = \"/iotevents/add\"; // you can specify the path\n\n        console.log(this.state.topic);\n        const params = {\n          \"template\": this.state.template,\n          \"topic\": this.state.topic,\n          \"timeout\": this.state.timeout,\n          \"modelname\": this.state.modelname\n        };\n        console.log(params);\n        const myInit = {\n          \"body\": params\n        };\n        const apiResponse = await API.put(\"api75996003\", path, myInit);\n        console.log(apiResponse.result);\n\n        if (apiResponse.result == true) {\n          this.showAddMessage(apiResponse.result, \"The Event Detector Model was created successfully\");\n        } else {\n          this.showAddMessage(apiResponse.result, apiResponse.errormessage);\n        }\n\n        console.log('response:' + apiResponse);\n      } catch (err) {\n        this.showAddMessage(false, err.message);\n      }\n    };\n\n    this.state = {\n      isFetching: true,\n      isFetchingDetectors: false,\n      value: [],\n      options: [],\n      template: [],\n      modelname: \"\",\n      topic: \"\",\n      timeout: 0,\n      viewmodelname: [],\n      modelUniqueId: [],\n      detectorinstances: [],\n      deletemodelname: [],\n      addmessagevisible: false,\n      addmessagestring: \"\",\n      addmessageresult: true\n    };\n  }\n\n  async loadEvents() {\n    const path = \"/iotevents/list\"; // you can specify the path\n\n    try {\n      const apiResponse = await API.get(\"api75996003\", path);\n      this.setState({\n        options: apiResponse.options\n      });\n      this.setState({\n        isFetching: false\n      });\n    } catch (err) {\n      console.log(\"error calling api: \" + err);\n    }\n  }\n\n  async loadDetectorInstances(value) {\n    try {\n      this.setState({\n        isFetchingDetectors: true\n      });\n      const path = \"/iotevents/detectors\"; // you can specify the path\n\n      const params = {\n        \"viewmodelname\": value\n      };\n      console.log(params);\n      const myInit = {\n        \"body\": params\n      };\n      const apiResponse = await API.put(\"api75996003\", path, myInit);\n      this.setState({\n        detectorinstances: apiResponse.options\n      });\n    } catch (err) {\n      console.log(\"error calling loaddetectorinstances: \" + err);\n    }\n\n    this.setState({\n      isFetchingDetectors: false\n    });\n  }\n\n  async showAddMessage(result, message) {\n    console.log(\"Showing message\");\n    this.setState({\n      addmessageresult: result\n    });\n    this.setState({\n      addmessagestring: message\n    });\n    this.setState({\n      addmessagevisible: true\n    });\n    await delay(5000);\n    this.setState({\n      addmessagevisible: false\n    });\n    console.log(\"Done showing\");\n  }\n\n  async removeEventModel() {\n    const path = \"/iotevents/delete\"; // you can specify the path\n\n    const params = {\n      \"modelname\": this.state.deletemodelname\n    };\n    console.log(params);\n    const myInit = {\n      \"body\": params\n    };\n    const apiResponse = await API.put(\"api75996003\", path, myInit);\n    console.log('response:' + apiResponse);\n  }\n\n  Items() {\n    return this.state.detectorinstances.sort(makeComparator('key')).map(detector => /*#__PURE__*/React.createElement(List.Item, {\n      key: detector.key,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Segment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      as: \"a\",\n      color: \"green\",\n      image: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      name: \"eye\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 13\n      }\n    }), \"Status:\", /*#__PURE__*/React.createElement(Label.Detail, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 13\n      }\n    }, detector.text))))));\n  }\n\n  componentDidMount() {\n    this.loadEvents();\n  }\n\n  render() {\n    const {\n      isFetching,\n      isFetchingDetectors,\n      addmessageresult,\n      addmessagestring,\n      addmessagevisible,\n      options,\n      deletemodelname,\n      value,\n      viewmodelname,\n      modelUniqueId,\n      template,\n      topic,\n      modelname,\n      timeout,\n      detectorinstances\n    } = this.state;\n    const templateOptions = [{\n      key: 'Simple Alarm',\n      text: 'Simple Alarm',\n      value: 'Simple Alarm'\n    }, {\n      key: 'HVAC Temperature Control',\n      text: 'HVAC Temperature Control',\n      value: 'HVAC Temperature Control'\n    }];\n    return /*#__PURE__*/React.createElement(AmplifyAuthenticator, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      padded: true,\n      centered: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      width: \"10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h1\",\n      icon: true,\n      textAlign: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: \"./iotevents.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Header.Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 13\n      }\n    }, \"IoT Events - Demo\")), /*#__PURE__*/React.createElement(Segment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h3\",\n      textAlign: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      name: \"plus circle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Header.Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 19\n      }\n    }, \"Create Event Model\", /*#__PURE__*/React.createElement(Header.Subheader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 21\n      }\n    }, \"Create a new IoT Event model\"))), /*#__PURE__*/React.createElement(Segment, {\n      basic: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Segment.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Segment.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown, {\n      placeholder: \"Select Event Model template\",\n      fluid: true,\n      options: templateOptions,\n      onChange: this.handleTemplateChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Segment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      fluid: true,\n      onChange: this.handleModelNameChange,\n      placeholder: \"Event Model Name...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 30\n      }\n    })), /*#__PURE__*/React.createElement(Segment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      fluid: true,\n      onChange: this.handleTimeoutChange,\n      placeholder: \"Alarm Timeout(s)...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 30\n      }\n    })), /*#__PURE__*/React.createElement(Segment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      fluid: true,\n      onChange: this.handleTopicChange,\n      placeholder: \"Input Topic...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 30\n      }\n    })), /*#__PURE__*/React.createElement(Segment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      primary: true,\n      onClick: this.handleClickAdd,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 30\n      }\n    }, \"Add Model\")))), /*#__PURE__*/React.createElement(Message, {\n      success: this.addmessageresult,\n      header: this.addmessagestring,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Segment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h3\",\n      textAlign: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      name: \"dashboard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Header.Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 19\n      }\n    }, \"Monitor Event Model\", /*#__PURE__*/React.createElement(Header.Subheader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 21\n      }\n    }, \"Select an IoT Event to monitor it's state\"))), /*#__PURE__*/React.createElement(Segment, {\n      basic: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Segment.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Segment.Group, {\n      horizontal: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown, {\n      fluid: true,\n      placeholder: \"Select an Event Model\",\n      disabled: isFetching,\n      loading: isFetching,\n      options: options,\n      defaultValue: viewmodelname,\n      onChange: this.handleEventModelChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      circular: true,\n      icon: \"refresh\",\n      onClick: this.handleClickRefresh,\n      color: \"black\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 23\n      }\n    })), this.Items()))), /*#__PURE__*/React.createElement(Segment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h3\",\n      textAlign: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      name: \"remove circle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Header.Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 19\n      }\n    }, \"Remove Event Models\", /*#__PURE__*/React.createElement(Header.Subheader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 21\n      }\n    }, \"Remove existing IoT Event models\"))), /*#__PURE__*/React.createElement(Segment, {\n      basic: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Segment.Group, {\n      horizontal: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown, {\n      fluid: true,\n      placeholder: \"Existing Event Models\",\n      disabled: isFetching,\n      loading: isFetching,\n      options: options,\n      defaultValue: deletemodelname,\n      onChange: this.handleEventModelRemoveChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      secondary: true,\n      onClick: this.handleClickRemove,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 21\n      }\n    }, \"Remove\")))), /*#__PURE__*/React.createElement(AmplifySignOut, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 13\n      }\n    })))));\n  }\n\n}\n\nfunction makeComparator(key, order = 'asc') {\n  return (a, b) => {\n    if (!a.hasOwnProperty(key) || !b.hasOwnProperty(key)) return 0;\n    const aVal = typeof a[key] === 'string' ? a[key].toUpperCase() : a[key];\n    const bVal = typeof b[key] === 'string' ? b[key].toUpperCase() : b[key];\n    let comparison = 0;\n    if (aVal > bVal) comparison = 1;\n    if (aVal < bVal) comparison = -1;\n    return order === 'desc' ? comparison * -1 : comparison;\n  };\n}\n\nconst styles = {\n  container: {\n    width: 500,\n    margin: '0 auto',\n    display: 'flex',\n    flex: 1,\n    flexDirection: 'column',\n    justifyContent: 'center',\n    padding: 20\n  },\n  todo: {\n    marginBottom: 15\n  },\n  input: {\n    border: 'none',\n    backgroundColor: '#ddd',\n    marginBottom: 10,\n    padding: 8,\n    fontSize: 18\n  },\n  button: {\n    backgroundColor: 'black',\n    color: 'white',\n    outline: 'none',\n    fontSize: 18,\n    padding: '12px 0px'\n  }\n};\nexport default App; //export default withAuthenticator(App, {  includeGreetings: true})","map":{"version":3,"sources":["/home/ec2-user/environment/react-amplified/src/App.js"],"names":["_","React","Component","Amplify","API","graphqlOperation","Auth","awsmobile","render","Bootstrap","delay","AmplifyAuthenticator","withAuthenticator","AmplifySignOut","Button","Input","List","Label","Icon","Form","Grid","Header","Image","Message","Segment","Dropdown","App","constructor","props","handleChange","e","value","setState","handleTemplateChange","template","handleTopicChange","topic","handleModelNameChange","modelname","handleTimeoutChange","timeout","handleEventModelChange","viewmodelname","loadDetectorInstances","handleEventModelIdChange","modelUniqueId","handleClickRefresh","state","handleEventModelRemoveChange","deletemodelname","handleClickRemove","removeEventModel","handleClickAdd","console","log","path","params","myInit","apiResponse","put","result","showAddMessage","errormessage","err","message","isFetching","isFetchingDetectors","options","detectorinstances","addmessagevisible","addmessagestring","addmessageresult","loadEvents","get","Items","sort","makeComparator","map","detector","key","text","componentDidMount","templateOptions","order","a","b","hasOwnProperty","aVal","toUpperCase","bVal","comparison","styles","container","width","margin","display","flex","flexDirection","justifyContent","padding","todo","marginBottom","input","border","backgroundColor","fontSize","button","color","outline"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport React, { Component } from 'react';\nimport logo from './logo.svg';\nimport Amplify, { API, graphqlOperation, Auth } from 'aws-amplify';\nimport './App.css';\nimport awsmobile from './aws-exports';\nimport { render } from \"react-dom\";\nimport { Bootstrap } from 'a-theme-react';\nimport delay from 'delay'\n\nimport { AmplifyAuthenticator, withAuthenticator, AmplifySignOut } from '@aws-amplify/ui-react';\n\nimport { Button, Input, List, Label, Icon, Form, Grid, Header, Image, Message, Segment, Dropdown } from 'semantic-ui-react'\n\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isFetching: true,\n      isFetchingDetectors: false,\n      value: [],\n      options: [],\n      template: [],\n      modelname: \"\",\n      topic: \"\",\n      timeout: 0,\n      viewmodelname: [],\n      modelUniqueId: [],\n      detectorinstances: [],\n      deletemodelname: [],\n      addmessagevisible: false,\n      addmessagestring: \"\",\n      addmessageresult: true\n    }\n  }\n  \n\n  handleChange = (e, { value }) => {\n  this.setState({value: value })\n  }\n  \n  handleTemplateChange = (e, { value }) => {\n  this.setState({ template: value })\n  }\n  \n  handleTopicChange = (e, { value }) => {\n  this.setState({ topic: value })\n  }\n  \n  handleModelNameChange = (e, { value }) => {\n  this.setState({ modelname: value})\n  }\n  \n  handleTimeoutChange = (e, { value }) => {\n  this.setState({ timeout: value })\n  }\n  \n  handleEventModelChange = (e, { value }) => {\n    this.setState({ viewmodelname: value})\n    this.loadDetectorInstances(value);\n  }\n  \n  handleEventModelIdChange = (e, { value }) => {\n  this.setState({ modelUniqueId: value})\n  }\n  \n  handleClickRefresh = (e, { value }) => {\n    this.loadDetectorInstances(this.state.viewmodelname);\n  }\n  \n  handleEventModelRemoveChange = (e, { value }) => {\n    this.setState({ deletemodelname: value})\n  }\n  \n  handleClickRemove = (e, { value }) => {\n    this.removeEventModel(this.state.deletemodelname);\n  }\n  \n  async loadEvents() {\n   const path = \"/iotevents/list\"; // you can specify the path\n    try{\n      const apiResponse = await API.get(\"api75996003\" , path);\n      this.setState({ options: apiResponse.options });\n      this.setState({isFetching: false});\n    }catch(err){\n      console.log(\"error calling api: \" + err);\n    }\n  }\n\n  async loadDetectorInstances(value) {\n  try{    \n    this.setState({isFetchingDetectors: true});\n   const path = \"/iotevents/detectors\"; // you can specify the path\n   const params = {\n      \"viewmodelname\": value\n   }\n   console.log(params);\n   const myInit = {\n    \"body\": params\n    };\n    const apiResponse = await API.put(\"api75996003\" , path, myInit);\n    this.setState({ detectorinstances: apiResponse.options });\n  }catch(err){\n    console.log(\"error calling loaddetectorinstances: \"+ err);\n  }\n    this.setState({isFetchingDetectors: false});\n\n  }\n\n  handleClickAdd = async ()  => {\n    try{\n    console.log(\"Adding now...\")\n     const path = \"/iotevents/add\"; // you can specify the path\n     console.log(this.state.topic)\n     const params = {\n        \"template\": this.state.template,\n        \"topic\":  this.state.topic,\n        \"timeout\":  this.state.timeout,\n        \"modelname\":  this.state.modelname\n     }\n     console.log(params);\n     const myInit = {\n      \"body\": params\n      };\n      const apiResponse = await API.put(\"api75996003\" , path, myInit);\n      console.log(apiResponse.result)\n      if(apiResponse.result == true){\n        this.showAddMessage(apiResponse.result, \"The Event Detector Model was created successfully\")\n      }\n      else{\n        this.showAddMessage(apiResponse.result, apiResponse.errormessage)\n      }\n      console.log('response:' + apiResponse);\n    }catch(err){\n      this.showAddMessage(false, err.message);  \n    }\n  }\n\n  async showAddMessage(result, message){\n    console.log(\"Showing message\")\n    this.setState({addmessageresult: result});\n    this.setState({addmessagestring: message});\n    this.setState({addmessagevisible: true});\n    await delay(5000);\n    this.setState({addmessagevisible: false});\n    console.log(\"Done showing\")\n  }\n  \n  async removeEventModel() {\n    const path = \"/iotevents/delete\"; // you can specify the path\n   const params = {\n      \"modelname\": this.state.deletemodelname\n   }\n   console.log(params);\n   const myInit = {\n    \"body\": params\n    };\n    const apiResponse = await API.put(\"api75996003\" , path, myInit);\n    console.log('response:' + apiResponse);\n  }\n  \n  Items() {\n    return this.state.detectorinstances.sort(makeComparator('key')).map(detector =>\n      <List.Item key={detector.key}>\n        <div>\n        <Segment>\n          <Label as='a' color='green' image>\n            <Icon name='eye'/>\n            Status:\n            <Label.Detail>{detector.text}</Label.Detail>\n          </Label>\n        </Segment>\n        </div>\n      </List.Item>\n    );\n  }\n  \n  componentDidMount() {\n       this.loadEvents();\n  }\n\n  render() {\n    const {isFetching, isFetchingDetectors, addmessageresult, addmessagestring, addmessagevisible, options, deletemodelname, value, viewmodelname, modelUniqueId, template, topic, modelname, timeout, detectorinstances } = this.state\n    \n    const templateOptions = [\n      {\n        key: 'Simple Alarm',\n        text: 'Simple Alarm',\n        value: 'Simple Alarm'\n      },\n      {\n        key: 'HVAC Temperature Control',\n        text: 'HVAC Temperature Control',\n        value: 'HVAC Temperature Control',\n      }\n    ]\n    return (\n      <AmplifyAuthenticator>\n        <div className=\"App\">\n        <Grid padded centered>\n          <Grid.Column width='10'>\n          <Header as='h1' icon textAlign='center'>\n            <Image src='./iotevents.png'  />\n            <Header.Content>IoT Events - Demo</Header.Content>\n          </Header>\n              <Segment>\n                <Header as='h3' textAlign='left'>\n                  <Icon name='plus circle' />\n                  <Header.Content>\n                    Create Event Model\n                    <Header.Subheader>Create a new IoT Event model</Header.Subheader>\n                  </Header.Content>\n                </Header>\n                <Segment basic>\n                  <Segment.Group>\n                    <Segment.Group>\n                    <Dropdown \n                      placeholder='Select Event Model template' \n                      fluid\n                      options={templateOptions}\n                      onChange={this.handleTemplateChange}\n                      />\n                    </Segment.Group>\n                    <Segment><Input fluid onChange={this.handleModelNameChange} placeholder=\"Event Model Name...\" /></Segment>\n                    <Segment><Input fluid onChange={this.handleTimeoutChange} placeholder=\"Alarm Timeout(s)...\" /></Segment>\n                    <Segment><Input fluid onChange={this.handleTopicChange} placeholder=\"Input Topic...\" /></Segment>\n                    <Segment><Button primary onClick={this.handleClickAdd}>Add Model</Button></Segment>\n                  </Segment.Group>\n                </Segment>\n                <Message\n                  success={this.addmessageresult}\n                  header={this.addmessagestring}\n                />\n              </Segment>\n              <Segment>\n                <Header as='h3' textAlign='left'>\n                  <Icon name='dashboard' />\n                  <Header.Content>\n                    Monitor Event Model\n                    <Header.Subheader>Select an IoT Event to monitor it's state</Header.Subheader>\n                  </Header.Content>\n                </Header>\n                <Segment basic>\n                  <Segment.Group>\n                    <Segment.Group horizontal>\n                    <Dropdown fluid placeholder='Select an Event Model' \n                        disabled={isFetching}\n                        loading={isFetching}\n                        options={options}\n                        defaultValue={viewmodelname}\n                        onChange={this.handleEventModelChange}\n                        />\n                      <Button circular icon='refresh' onClick={this.handleClickRefresh} color='black'>\n                      </Button>\n                    </Segment.Group>\n                    {this.Items()}\n                  </Segment.Group>\n                </Segment>\n              </Segment>\n              <Segment>\n                <Header as='h3' textAlign='left'>\n                  <Icon name='remove circle' />\n                  <Header.Content>\n                    Remove Event Models\n                    <Header.Subheader>Remove existing IoT Event models</Header.Subheader>\n                  </Header.Content>\n                </Header>\n                <Segment basic>\n                  <Segment.Group horizontal>\n                  <Dropdown fluid placeholder='Existing Event Models' \n                        disabled={isFetching}\n                        loading={isFetching}\n                        options={options}\n                        defaultValue={deletemodelname}\n                        onChange={this.handleEventModelRemoveChange}\n                        />\n                    <Button secondary onClick={this.handleClickRemove}>Remove</Button>\n                  </Segment.Group>\n                </Segment>\n              </Segment>\n            <AmplifySignOut />\n          </Grid.Column>\n        </Grid>\n      </div>\n    </AmplifyAuthenticator>\n    )\n  }\n}\n\nfunction makeComparator(key, order='asc') {\n  return (a, b) => {\n    if(!a.hasOwnProperty(key) || !b.hasOwnProperty(key)) return 0; \n\n    const aVal = (typeof a[key] === 'string') ? a[key].toUpperCase() : a[key];\n    const bVal = (typeof b[key] === 'string') ? b[key].toUpperCase() : b[key];\n\n    let comparison = 0;\n    if (aVal > bVal) comparison = 1;\n    if (aVal < bVal) comparison = -1;\n\n    return order === 'desc' ? (comparison * -1) : comparison\n  };\n}\n\nconst styles = {\n  container: { width: 500, margin: '0 auto', display: 'flex', flex: 1, flexDirection: 'column', justifyContent: 'center', padding: 20 },\n  todo: {  marginBottom: 15 },\n  input: { border: 'none', backgroundColor: '#ddd', marginBottom: 10, padding: 8, fontSize: 18 },\n  button: { backgroundColor: 'black', color: 'white', outline: 'none', fontSize: 18, padding: '12px 0px' }\n}\n\nexport default App\n//export default withAuthenticator(App, {  includeGreetings: true})\n"]},"metadata":{},"sourceType":"module"}