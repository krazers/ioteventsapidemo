{"ast":null,"code":"import _regeneratorRuntime from\"/home/ec2-user/environment/react-amplified/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ec2-user/environment/react-amplified/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ec2-user/environment/react-amplified/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ec2-user/environment/react-amplified/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ec2-user/environment/react-amplified/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ec2-user/environment/react-amplified/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _ from'lodash';import React,{Component}from'react';import logo from\"./logo.svg\";import Amplify,{API,graphqlOperation,Auth}from'aws-amplify';import'./App.css';import awsmobile from'./aws-exports';import{render}from\"react-dom\";import{Bootstrap}from'a-theme-react';import{AmplifyAuthenticator,withAuthenticator,AmplifySignOut}from'@aws-amplify/ui-react';import{Button,Input,Icon,Form,Grid,Header,Image,Message,Segment,Dropdown}from'semantic-ui-react';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.handleChange=function(e,_ref){var value=_ref.value;_this.setState({value:value});};_this.handleTemplateChange=function(e,_ref2){var value=_ref2.value;_this.setState({template:value});};_this.handleTopicChange=function(e,_ref3){var value=_ref3.value;_this.setState({topic:value});};_this.handleModelNameChange=function(e,_ref4){var value=_ref4.value;_this.setState({modelname:value});};_this.handleTimeoutChange=function(e,_ref5){var value=_ref5.value;_this.setState({timeout:value});};_this.handleEventModelChange=function(e,_ref6){var value=_ref6.value;_this.setState({viewmodelname:value});_this.loadDetectorInstances(value);};_this.handleEventModelIdChange=function(e,_ref7){var value=_ref7.value;_this.setState({modelUniqueId:value});};_this.handleClickAdd=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var path,params,myInit,apiResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"Adding now...\");path=\"/iotevents/add\";// you can specify the path\nconsole.log(_this.state.topic);params={\"template\":_this.state.template,\"topic\":_this.state.topic,\"timeout\":_this.state.timeout,\"modelname\":_this.state.modelname};console.log(params);myInit={\"body\":params};console.log(\"Calling API to add\");_context.next=9;return API.put(\"api75996003\",path,myInit);case 9:apiResponse=_context.sent;console.log('response:'+apiResponse);case 11:case\"end\":return _context.stop();}}},_callee);}));_this.state={isFetching:true,isFetchingDetectors:false,value:[],options:[],template:[],modelname:\"\",topic:\"\",timeout:0,viewmodelname:[],modelUniqueId:[],detectorinstances:[]};return _this;}_createClass(App,[{key:\"loadEvents\",value:function(){var _loadEvents=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var path,apiResponse;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:path=\"/iotevents/list\";// you can specify the path\n_context2.prev=1;_context2.next=4;return API.get(\"api75996003\",path);case 4:apiResponse=_context2.sent;this.setState({options:apiResponse.options});this.setState({isFetching:false});_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);console.log(\"error calling api: \"+_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,this,[[1,9]]);}));function loadEvents(){return _loadEvents.apply(this,arguments);}return loadEvents;}()},{key:\"loadDetectorInstances\",value:function(){var _loadDetectorInstances=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(value){var path,params,myInit,apiResponse;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;this.setState({isFetchingDetectors:true});path=\"/iotevents/listdetectors\";// you can specify the path\nconsole.log(this.state.topic);params={\"viewmodelname\":value};console.log(params);myInit={\"body\":params};_context3.next=9;return API.get(\"api75996003\",path,myInit);case 9:apiResponse=_context3.sent;this.setState({detectorinstances:apiResponse.options});_context3.next=16;break;case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](0);console.log(\"error calling loaddetectorinstances: \"+_context3.t0);case 16:this.setState({isFetchingDetectors:false});case 17:case\"end\":return _context3.stop();}}},_callee3,this,[[0,13]]);}));function loadDetectorInstances(_x){return _loadDetectorInstances.apply(this,arguments);}return loadDetectorInstances;}()},{key:\"componentDidMount\",value:function componentDidMount(){this.loadEvents();}},{key:\"render\",value:function render(){var _this$state=this.state,isFetching=_this$state.isFetching,isFetchingDetectors=_this$state.isFetchingDetectors,options=_this$state.options,value=_this$state.value,viewmodelname=_this$state.viewmodelname,modelUniqueId=_this$state.modelUniqueId,template=_this$state.template,topic=_this$state.topic,modelname=_this$state.modelname,timeout=_this$state.timeout,detectorinstances=_this$state.detectorinstances;var templateOptions=[{key:'Simple Alarm',text:'Simple Alarm',value:'Simple Alarm'},{key:'HVAC Temperature Control',text:'HVAC Temperature Control',value:'HVAC Temperature Control'}];return/*#__PURE__*/React.createElement(AmplifyAuthenticator,null,/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Grid,{padded:true,centered:true},/*#__PURE__*/React.createElement(Grid.Column,{width:\"10\"},/*#__PURE__*/React.createElement(Header,{as:\"h1\",icon:true,textAlign:\"center\"},/*#__PURE__*/React.createElement(Image,{src:\"./iotevents.png\"}),/*#__PURE__*/React.createElement(Header.Content,null,\"IoT Events - Demo\")),/*#__PURE__*/React.createElement(Segment,null,/*#__PURE__*/React.createElement(Header,{as:\"h3\",textAlign:\"left\"},/*#__PURE__*/React.createElement(Icon,{name:\"settings\"}),/*#__PURE__*/React.createElement(Header.Content,null,\"Create Event Model\",/*#__PURE__*/React.createElement(Header.Subheader,null,\"Create a new IoT Event model\"))),/*#__PURE__*/React.createElement(Segment,{basic:true},/*#__PURE__*/React.createElement(Segment.Group,null,/*#__PURE__*/React.createElement(Segment.Group,null,/*#__PURE__*/React.createElement(Dropdown,{placeholder:\"Select Event Model template\",fluid:true,options:templateOptions,onChange:this.handleTemplateChange})),/*#__PURE__*/React.createElement(Segment,null,/*#__PURE__*/React.createElement(Input,{fluid:true,onChange:this.handleModelNameChange,placeholder:\"Event Model Name...\"})),/*#__PURE__*/React.createElement(Segment,null,/*#__PURE__*/React.createElement(Input,{fluid:true,onChange:this.handleTimeoutChange,placeholder:\"Alarm Timeout(s)...\"})),/*#__PURE__*/React.createElement(Segment,null,/*#__PURE__*/React.createElement(Input,{fluid:true,onChange:this.handleTopicChange,placeholder:\"Input Topic...\"})),/*#__PURE__*/React.createElement(Segment,null,/*#__PURE__*/React.createElement(Button,{primary:true,onClick:this.handleClickAdd},\"Add Model\"))))),/*#__PURE__*/React.createElement(Segment,null,/*#__PURE__*/React.createElement(Header,{as:\"h3\",textAlign:\"left\"},/*#__PURE__*/React.createElement(Icon,{name:\"settings\"}),/*#__PURE__*/React.createElement(Header.Content,null,\"Monitor Event Model\",/*#__PURE__*/React.createElement(Header.Subheader,null,\"Select an IoT Event to monitor it's state\"))),/*#__PURE__*/React.createElement(Segment,{basic:true},/*#__PURE__*/React.createElement(Segment.Group,null,/*#__PURE__*/React.createElement(Segment.Group,null,/*#__PURE__*/React.createElement(Dropdown,{fluid:true,placeholder:\"Select an Event Model\",disabled:isFetching,loading:isFetching,options:options,defaultValue:viewmodelname,onChange:this.handleEventModelChange})),/*#__PURE__*/React.createElement(Segment.Group,null,/*#__PURE__*/React.createElement(Dropdown,{fluid:true,placeholder:\"Select model id\",disabled:isFetchingDetectors,loading:isFetchingDetectors,options:detectorinstances,defaultValue:modelUniqueId,onChange:this.handleEventModelIdChange})),/*#__PURE__*/React.createElement(Segment,null,/*#__PURE__*/React.createElement(Input,{fluid:true,onChange:this.handleModelNameChange}))))),/*#__PURE__*/React.createElement(Segment,null,/*#__PURE__*/React.createElement(Header,{as:\"h3\",textAlign:\"left\"},/*#__PURE__*/React.createElement(Icon,{name:\"settings\"}),/*#__PURE__*/React.createElement(Header.Content,null,\"Event Models\",/*#__PURE__*/React.createElement(Header.Subheader,null,\"Remove existing IoT Event models or inputs\"))),/*#__PURE__*/React.createElement(Segment,{basic:true},/*#__PURE__*/React.createElement(Segment.Group,{horizontal:true},/*#__PURE__*/React.createElement(Dropdown,{fluid:true,placeholder:\"Existing Event Models\",disabled:isFetching,loading:isFetching,options:options,defaultValue:value,onChange:this.handleChange}),/*#__PURE__*/React.createElement(Button,{secondary:true},\"Remove Model\")))),/*#__PURE__*/React.createElement(AmplifySignOut,null)))));}}]);return App;}(Component);var styles={container:{width:500,margin:'0 auto',display:'flex',flex:1,flexDirection:'column',justifyContent:'center',padding:20},todo:{marginBottom:15},input:{border:'none',backgroundColor:'#ddd',marginBottom:10,padding:8,fontSize:18},button:{backgroundColor:'black',color:'white',outline:'none',fontSize:18,padding:'12px 0px'}};export default App;//export default withAuthenticator(App, {  includeGreetings: true})","map":{"version":3,"sources":["/home/ec2-user/environment/react-amplified/src/App.js"],"names":["_","React","Component","Amplify","API","graphqlOperation","Auth","awsmobile","render","Bootstrap","AmplifyAuthenticator","withAuthenticator","AmplifySignOut","Button","Input","Icon","Form","Grid","Header","Image","Message","Segment","Dropdown","App","props","handleChange","e","value","setState","handleTemplateChange","template","handleTopicChange","topic","handleModelNameChange","modelname","handleTimeoutChange","timeout","handleEventModelChange","viewmodelname","loadDetectorInstances","handleEventModelIdChange","modelUniqueId","handleClickAdd","console","log","path","state","params","myInit","put","apiResponse","isFetching","isFetchingDetectors","options","detectorinstances","get","loadEvents","templateOptions","key","text","styles","container","width","margin","display","flex","flexDirection","justifyContent","padding","todo","marginBottom","input","border","backgroundColor","fontSize","button","color","outline"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport React, { Component } from 'react';\nimport logo from './logo.svg';\nimport Amplify, { API, graphqlOperation, Auth } from 'aws-amplify';\nimport './App.css';\nimport awsmobile from './aws-exports';\nimport { render } from \"react-dom\";\nimport { Bootstrap } from 'a-theme-react';\n\nimport { AmplifyAuthenticator, withAuthenticator, AmplifySignOut } from '@aws-amplify/ui-react';\n\nimport { Button, Input, Icon, Form, Grid, Header, Image, Message, Segment, Dropdown } from 'semantic-ui-react'\n\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isFetching: true,\n      isFetchingDetectors: false,\n      value: [],\n      options: [],\n      template: [],\n      modelname: \"\",\n      topic: \"\",\n      timeout: 0,\n      viewmodelname: [],\n      modelUniqueId: [],\n      detectorinstances: []\n    }\n  }\n  \n\n  handleChange = (e, { value }) => {\n  this.setState({value: value })\n  }\n  \n  handleTemplateChange = (e, { value }) => {\n  this.setState({ template: value })\n  }\n  \n  handleTopicChange = (e, { value }) => {\n  this.setState({ topic: value })\n  }\n  \n  handleModelNameChange = (e, { value }) => {\n  this.setState({ modelname: value})\n  }\n  \n  handleTimeoutChange = (e, { value }) => {\n  this.setState({ timeout: value })\n  }\n  \n  handleEventModelChange = (e, { value }) => {\n    this.setState({ viewmodelname: value})\n    this.loadDetectorInstances(value);\n  }\n  \n  handleEventModelIdChange = (e, { value }) => {\n  this.setState({ modelUniqueId: value})\n  }\n  \n  async loadEvents() {\n   const path = \"/iotevents/list\"; // you can specify the path\n    try{\n      const apiResponse = await API.get(\"api75996003\" , path);\n      this.setState({ options: apiResponse.options });\n      this.setState({isFetching: false});\n    }catch(err){\n      console.log(\"error calling api: \" + err);\n    }\n  }\n\n  async loadDetectorInstances(value) {\n  try{    \n    this.setState({isFetchingDetectors: true});\n   const path = \"/iotevents/listdetectors\"; // you can specify the path\n   console.log(this.state.topic)\n   const params = {\n      \"viewmodelname\": value\n   }\n   console.log(params);\n   const myInit = {\n    \"body\": params\n    };\n    const apiResponse = await API.get(\"api75996003\" , path, myInit);\n    this.setState({ detectorinstances: apiResponse.options });\n  }catch(err){\n    console.log(\"error calling loaddetectorinstances: \"+ err);\n  }\n    this.setState({isFetchingDetectors: false});\n\n  }\n\n  handleClickAdd = async ()  => {\n    console.log(\"Adding now...\")\n    const path = \"/iotevents/add\"; // you can specify the path\n   console.log(this.state.topic)\n   const params = {\n      \"template\": this.state.template,\n      \"topic\":  this.state.topic,\n      \"timeout\":  this.state.timeout,\n      \"modelname\":  this.state.modelname\n   }\n   console.log(params);\n   const myInit = {\n    \"body\": params\n    };\n    console.log(\"Calling API to add\")\n    const apiResponse = await API.put(\"api75996003\" , path, myInit);\n    console.log('response:' + apiResponse);\n  }\n  componentDidMount() {\n       this.loadEvents();\n  }\n\n  render() {\n    const {isFetching, isFetchingDetectors, options, value, viewmodelname, modelUniqueId, template, topic, modelname, timeout, detectorinstances } = this.state\n    \n    const templateOptions = [\n      {\n        key: 'Simple Alarm',\n        text: 'Simple Alarm',\n        value: 'Simple Alarm'\n      },\n      {\n        key: 'HVAC Temperature Control',\n        text: 'HVAC Temperature Control',\n        value: 'HVAC Temperature Control',\n      }\n    ]\n    return (\n      <AmplifyAuthenticator>\n        <div className=\"App\">\n        <Grid padded centered>\n          <Grid.Column width='10'>\n          <Header as='h1' icon textAlign='center'>\n            <Image src='./iotevents.png'  />\n            <Header.Content>IoT Events - Demo</Header.Content>\n          </Header>\n              <Segment>\n                <Header as='h3' textAlign='left'>\n                  <Icon name='settings' />\n                  <Header.Content>\n                    Create Event Model\n                    <Header.Subheader>Create a new IoT Event model</Header.Subheader>\n                  </Header.Content>\n                </Header>\n                <Segment basic>\n                  <Segment.Group>\n                    <Segment.Group>\n                    <Dropdown \n                      placeholder='Select Event Model template' \n                      fluid\n                      options={templateOptions}\n                      onChange={this.handleTemplateChange}\n                      />\n                    </Segment.Group>\n                    <Segment><Input fluid onChange={this.handleModelNameChange} placeholder=\"Event Model Name...\" /></Segment>\n                    <Segment><Input fluid onChange={this.handleTimeoutChange} placeholder=\"Alarm Timeout(s)...\" /></Segment>\n                    <Segment><Input fluid onChange={this.handleTopicChange} placeholder=\"Input Topic...\" /></Segment>\n                    <Segment><Button primary onClick={this.handleClickAdd}>Add Model</Button></Segment>\n                  </Segment.Group>\n                </Segment>\n              </Segment>\n              <Segment>\n                <Header as='h3' textAlign='left'>\n                  <Icon name='settings' />\n                  <Header.Content>\n                    Monitor Event Model\n                    <Header.Subheader>Select an IoT Event to monitor it's state</Header.Subheader>\n                  </Header.Content>\n                </Header>\n                <Segment basic>\n                  <Segment.Group>\n                    <Segment.Group>\n                      <Dropdown fluid placeholder='Select an Event Model' \n                        disabled={isFetching}\n                        loading={isFetching}\n                        options={options}\n                        defaultValue={viewmodelname}\n                        onChange={this.handleEventModelChange}\n                        />\n                    </Segment.Group>\n                    <Segment.Group>\n                      <Dropdown fluid placeholder='Select model id' \n                        disabled={isFetchingDetectors}\n                        loading={isFetchingDetectors}\n                        options={detectorinstances}\n                        defaultValue={modelUniqueId}\n                        onChange={this.handleEventModelIdChange}\n                        />\n                    </Segment.Group>\n                    <Segment><Input fluid onChange={this.handleModelNameChange}  /></Segment>\n                  </Segment.Group>\n                </Segment>\n              </Segment>\n              <Segment>\n                <Header as='h3' textAlign='left'>\n                  <Icon name='settings' />\n                  <Header.Content>\n                    Event Models\n                    <Header.Subheader>Remove existing IoT Event models or inputs</Header.Subheader>\n                  </Header.Content>\n                </Header>\n                <Segment basic>\n                  <Segment.Group horizontal>\n                  <Dropdown fluid placeholder='Existing Event Models' \n                        disabled={isFetching}\n                        loading={isFetching}\n                        options={options}\n                        defaultValue={value}\n                        onChange={this.handleChange}\n                        />\n                    <Button secondary>Remove Model</Button>\n                  </Segment.Group>\n                </Segment>\n              </Segment>\n            <AmplifySignOut />\n          </Grid.Column>\n        </Grid>\n      </div>\n    </AmplifyAuthenticator>\n    )\n  }\n}\n\nconst styles = {\n  container: { width: 500, margin: '0 auto', display: 'flex', flex: 1, flexDirection: 'column', justifyContent: 'center', padding: 20 },\n  todo: {  marginBottom: 15 },\n  input: { border: 'none', backgroundColor: '#ddd', marginBottom: 10, padding: 8, fontSize: 18 },\n  button: { backgroundColor: 'black', color: 'white', outline: 'none', fontSize: 18, padding: '12px 0px' }\n}\n\nexport default App\n//export default withAuthenticator(App, {  includeGreetings: true})\n"]},"metadata":{},"sourceType":"module"}