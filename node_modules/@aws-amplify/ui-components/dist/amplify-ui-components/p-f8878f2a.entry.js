import{r as t,h as e}from"./p-d292943b.js";import{I18n as i,isEmpty as s,Logger as n,ConsoleLogger as a}from"@aws-amplify/core";import{M as r,C as o,A as h,a as l}from"./p-417bb5ea.js";import{T as p}from"./p-ded057ca.js";import{N as u,C as c,e as d,f as m}from"./p-e70c33b3.js";import{Auth as f}from"@aws-amplify/auth";import{d as y,a as b,c as g,b as w}from"./p-8e44cc54.js";const x=class{constructor(e){t(this,e),this.handleSubmit=t=>this.confirm(t),this.headerText=i.get(p.CONFIRM_SMS_CODE),this.submitButtonText=i.get(p.CONFIRM),this.handleAuthStateChange=y,this.formFields=[{type:"code",required:!0,handleInputChange:t=>this.handleCodeChange(t)}],this.mfaOption=r.SMS,this.loading=!1}componentWillLoad(){this.user&&this.user.challengeName===o.SoftwareTokenMFA&&(this.mfaOption=r.TOTP,this.headerText===i.get(p.CONFIRM_SMS_CODE)&&(this.headerText=i.get(p.CONFIRM_TOTP_CODE)))}handleCodeChange(t){this.code=t.target.value}checkContact(t){if(!f||"function"!=typeof f.verifiedContact)throw new Error(u);f.verifiedContact(t).then(e=>{s(e.verified)?(t=Object.assign(t,e),this.handleAuthStateChange(h.VerifyContact,t)):this.handleAuthStateChange(h.SignedIn,t)})}async confirm(t){t&&t.preventDefault();const e=this.user.challengeName===o.SoftwareTokenMFA?o.SoftwareTokenMFA:null;if(!f||"function"!=typeof f.confirmSignIn)throw new Error(u);this.loading=!0;try{await f.confirmSignIn(this.user,this.code,e),this.checkContact(this.user)}catch(i){b(i)}finally{this.loading=!1}}render(){return e("amplify-form-section",{headerText:this.headerText,handleSubmit:this.handleSubmit,submitButtonText:this.submitButtonText,loading:this.loading,secondaryFooterContent:e("span",null,e("amplify-button",{variant:"anchor",onClick:()=>this.handleAuthStateChange(h.SignIn)},i.get(p.BACK_TO_SIGN_IN)))},e("amplify-auth-fields",{formFields:this.formFields}))}},C=class{constructor(e){t(this,e),this.handleSubmit=t=>this.confirmSignUp(t),this.headerText=i.get(p.CONFIRM_SIGN_UP_HEADER_TEXT),this.submitButtonText=i.get(p.CONFIRM_SIGN_UP_SUBMIT_BUTTON_TEXT),this.formFields=[],this.handleAuthStateChange=y,this.usernameAlias="username",this.loading=!1,this.userInput=this.user?this.user.username:null,this._signUpAttrs=this.user&&this.user.signUpAttrs?this.user.signUpAttrs:null,this.newFormFields=[]}componentWillLoad(){g(this.usernameAlias),0===this.formFields.length?this.newFormFields=[{type:""+this.usernameAlias,required:!0,handleInputChange:this.handleFormFieldInputChange(""+this.usernameAlias),value:this.userInput,disabled:!!this.userInput},{type:"code",label:i.get(p.CONFIRM_SIGN_UP_CODE_LABEL),placeholder:i.get(p.CONFIRM_SIGN_UP_CODE_PLACEHOLDER),required:!0,hint:e("div",null,i.get(p.CONFIRM_SIGN_UP_LOST_CODE)," ",e("amplify-button",{variant:"anchor",onClick:()=>this.resendConfirmCode()},i.get(p.CONFIRM_SIGN_UP_RESEND_CODE))),handleInputChange:this.handleFormFieldInputChange("code")}]:this.formFields.forEach(t=>{const e=Object.assign({},t);e.handleInputChange=e=>this.handleFormFieldInputWithCallback(e,t),this.newFormFields.push(e)})}handleFormFieldInputChange(t){switch(t){case"username":case"email":case"phone_number":return t=>this.userInput=t.target.value;case"code":return t=>this.code=t.target.value;default:return}}handleFormFieldInputWithCallback(t,e){(e.handleInputChange?e.handleInputChange:(t,e)=>{e(t)})(t,this.handleFormFieldInputChange(e.type).bind(this))}async resendConfirmCode(){if(event&&event.preventDefault(),!f||"function"!=typeof f.resendSignUp)throw new Error(u);try{if(!this.userInput)throw new Error("Username can not be empty");await f.resendSignUp(this.userInput),this.handleAuthStateChange(h.ConfirmSignUp)}catch(t){b(t)}}async confirmSignUp(t){if(t&&t.preventDefault(),!f||"function"!=typeof f.confirmSignUp)throw new Error(u);this.loading=!0;try{const t=await f.confirmSignUp(this.userInput,this.code)&&this._signUpAttrs&&await f.signIn(this.userInput,this._signUpAttrs.password);this.handleAuthStateChange(h.SignedIn,t)}catch(e){b(e)}finally{this.loading=!1}}render(){return e("amplify-form-section",{headerText:this.headerText,submitButtonText:this.submitButtonText,handleSubmit:this.handleSubmit,secondaryFooterContent:e("div",null,e("span",null,e("amplify-button",{variant:"anchor",onClick:()=>this.handleAuthStateChange(h.SignIn)},i.get(p.BACK_TO_SIGN_IN))))},e("amplify-auth-fields",{formFields:this.newFormFields}))}},v=new n("ForgotPassword"),k=class{constructor(e){t(this,e),this.headerText=i.get(p.RESET_YOUR_PASSWORD),this.submitButtonText=i.get(p.SEND_CODE),this.formFields=[],this.handleSend=t=>this.send(t),this.handleSubmit=t=>this.submit(t),this.handleAuthStateChange=y,this.usernameAlias="username",this.delivery=null,this.loading=!1,this.phoneNumber={countryDialCodeValue:c,phoneNumberValue:null},this.newFormFields=[],this.forgotPasswordAttrs={userInput:"",password:"",code:""}}componentWillLoad(){if(g(this.usernameAlias),0===this.formFields.length)switch(this.usernameAlias){case"email":this.newFormFields=[{type:"email",required:!0,handleInputChange:this.handleFormFieldInput("email"),inputProps:{"data-test":"forgot-password-email-input"}}];break;case"phone_number":this.newFormFields=[{type:"phone_number",required:!0,handleInputChange:this.handleFormFieldInput("phone_number"),inputProps:{"data-test":"forgot-password-phone-number-input"}}];break;case"username":default:this.newFormFields=[{type:"username",required:!0,handleInputChange:this.handleFormFieldInput("username"),inputProps:{"data-test":"forgot-password-username-input"}}]}else this.formFields.forEach(t=>{const e=Object.assign({},t);e.handleInputChange=e=>this.handleFormFieldInputWithCallback(e,t),this.newFormFields.push(e)})}handleFormFieldInput(t){switch(t){case"username":case"email":return t=>this.forgotPasswordAttrs.userInput=t.target.value;case"phone_number":return t=>this.handlePhoneNumberChange(t);case"password":case"code":return e=>this.forgotPasswordAttrs[t]=e.target.value;default:return}}handleFormFieldInputWithCallback(t,e){(e.handleInputChange?e.handleInputChange:(t,e)=>{e(t)})(t,("phone_number"===e.type?t=>this.forgotPasswordAttrs.userInput=t.target.value:this.handleFormFieldInput(e.type)).bind(this))}handlePhoneNumberChange(t){const e=t.target.name,i=t.target.value;e===d&&(this.phoneNumber.countryDialCodeValue=i),e===m&&(this.phoneNumber.phoneNumberValue=i)}async send(t){if(t&&t.preventDefault(),!f||"function"!=typeof f.forgotPassword)throw new Error(u);switch(this.loading=!0,this.usernameAlias){case"phone_number":this.forgotPasswordAttrs.userInput=w(this.phoneNumber)}try{const t=await f.forgotPassword(this.forgotPasswordAttrs.userInput);v.debug(t),this.newFormFields=[{type:"code",required:!0,handleInputChange:this.handleFormFieldInput("code"),inputProps:{"data-test":"forgot-password-code-input"}},{type:"password",required:!0,handleInputChange:this.handleFormFieldInput("password"),label:"New password",placeholder:"Enter your new password"}],this.delivery=t.CodeDeliveryDetails}catch(e){b(e)}finally{this.loading=!1}}async submit(t){if(t&&t.preventDefault(),!f||"function"!=typeof f.forgotPasswordSubmit)throw new Error(u);this.loading=!0;try{const{userInput:t,code:e,password:i}=this.forgotPasswordAttrs,s=await f.forgotPasswordSubmit(t,e,i);v.debug(s),this.handleAuthStateChange(h.SignIn),this.delivery=null}catch(e){b(e)}finally{this.loading=!1}}render(){return e("amplify-form-section",{headerText:this.headerText,handleSubmit:this.delivery?t=>this.handleSubmit(t):t=>this.handleSend(t),loading:this.loading,secondaryFooterContent:e("amplify-button",{variant:"anchor",onClick:()=>this.handleAuthStateChange(h.SignIn),"data-test":"forgot-password-back-to-sign-in-link"},i.get(p.BACK_TO_SIGN_IN)),testDataPrefix:"forgot-password"},e("amplify-auth-fields",{formFields:this.newFormFields}))}},_=new a("amplify-require-new-password"),I=class{constructor(e){t(this,e),this.headerText=i.get(p.CHANGE_PASSWORD),this.submitButtonText=i.get(p.CHANGE_PASSWORD_ACTION),this.handleSubmit=t=>this.completeNewPassword(t),this.handleAuthStateChange=y,this.formFields=[{type:l.Password,required:!0,handleInputChange:t=>this.handlePasswordChange(t),label:i.get(p.NEW_PASSWORD_LABEL),placeholder:i.get(p.NEW_PASSWORD_PLACEHOLDER)}],this.loading=!1}handlePasswordChange(t){this.password=t.target.value}async checkContact(t){if(!f||"function"!=typeof f.verifiedContact)throw new Error(u);try{const e=await f.verifiedContact(t);s(e.verified)?(t=Object.assign(t,e),this.handleAuthStateChange(h.VerifyContact,t)):this.handleAuthStateChange(h.SignedIn,t)}catch(e){b(e)}}async completeNewPassword(t){if(t&&t.preventDefault(),!f||"function"!=typeof f.completeNewPassword)throw new Error(u);this.loading=!0;try{const{requiredAttributes:t}=this.user.challengeParam,e=await f.completeNewPassword(this.user,this.password,t);switch(_.debug("complete new password",e),e.challengeName){case o.SMSMFA:this.handleAuthStateChange(h.ConfirmSignIn,e);break;case o.MFASetup:_.debug("TOTP setup",e.challengeParam),this.handleAuthStateChange(h.TOTPSetup,e);break;default:this.checkContact(e)}}catch(e){b(e)}finally{this.loading=!1}}render(){return e("amplify-form-section",{headerText:this.headerText,handleSubmit:this.handleSubmit,loading:this.loading,secondaryFooterContent:e("amplify-button",{variant:"anchor",onClick:()=>this.handleAuthStateChange(h.SignIn)},i.get(p.BACK_TO_SIGN_IN))},e("amplify-auth-fields",{formFields:this.formFields}))}},P=new n("SignIn"),q=class{constructor(e){t(this,e),this.handleSubmit=t=>this.signIn(t),this.headerText=i.get(p.SIGN_IN_HEADER_TEXT),this.submitButtonText=i.get(p.SIGN_IN_ACTION),this.handleAuthStateChange=y,this.usernameAlias="username",this.formFields=[],this.loading=!1,this.phoneNumber={countryDialCodeValue:c,phoneNumberValue:null},this.newFormFields=[],this.signInAttributes={userInput:"",password:""}}handleFormFieldInput(t){switch(t){case"username":case"email":return t=>this.signInAttributes.userInput=t.target.value;case"phone_number":return t=>this.handlePhoneNumberChange(t);case"password":return t=>this.signInAttributes.password=t.target.value}}handleFormFieldInputWithCallback(t,e){(e.handleInputChange?e.handleInputChange:(t,e)=>{e(t)})(t,("phone_number"===e.type?t=>this.signInAttributes.userInput=t.target.value:this.handleFormFieldInput(e.type)).bind(this))}handlePhoneNumberChange(t){const e=t.target.name,i=t.target.value;e===d&&(this.phoneNumber.countryDialCodeValue=i),e===m&&(this.phoneNumber.phoneNumberValue=i)}checkContact(t){if(!f||"function"!=typeof f.verifiedContact)throw new Error(u);f.verifiedContact(t).then(e=>{s(e.verified)?(t=Object.assign(t,e),this.handleAuthStateChange(h.VerifyContact,t)):this.handleAuthStateChange(h.SignedIn,t)})}async signIn(t){if(t&&t.preventDefault(),!f||"function"!=typeof f.signIn)throw new Error(u);switch(this.loading=!0,this.usernameAlias){case"phone_number":this.signInAttributes.userInput=w(this.phoneNumber)}try{const t=await f.signIn(this.signInAttributes.userInput,this.signInAttributes.password);P.debug(t),t.challengeName===o.SMSMFA||t.challengeName===o.SoftwareTokenMFA?(P.debug("confirm user with "+t.challengeName),this.handleAuthStateChange(h.ConfirmSignIn,t)):t.challengeName===o.NewPasswordRequired?(P.debug("require new password",t.challengeParam),this.handleAuthStateChange(h.ResetPassword,t)):t.challengeName===o.MFASetup?(P.debug("TOTP setup",t.challengeParam),this.handleAuthStateChange(h.TOTPSetup,t)):t.challengeName===o.CustomChallenge&&t.challengeParam&&"true"===t.challengeParam.trigger?(P.debug("custom challenge",t.challengeParam),this.handleAuthStateChange(h.CustomConfirmSignIn,t)):this.checkContact(t)}catch(e){b(e),"UserNotConfirmedException"===e.code?(P.debug("the user is not confirmed"),this.handleAuthStateChange(h.ConfirmSignUp,{username:this.signInAttributes.userInput})):"PasswordResetRequiredException"===e.code&&(P.debug("the user requires a new password"),this.handleAuthStateChange(h.ForgotPassword,{username:this.signInAttributes.userInput}))}finally{this.loading=!1}}async componentWillLoad(){if(g(this.usernameAlias),0===this.formFields.length){const t=[];switch(this.usernameAlias){case"email":t.push({type:"email",required:!0,handleInputChange:this.handleFormFieldInput("email"),inputProps:{"data-test":"sign-in-email-input"}});break;case"phone_number":t.push({type:"phone_number",required:!0,handleInputChange:this.handleFormFieldInput("phone_number"),inputProps:{"data-test":"sign-in-phone-number-input"}});break;case"username":default:t.push({type:"username",required:!0,handleInputChange:this.handleFormFieldInput("username"),inputProps:{"data-test":"sign-in-username-input"}})}t.push({type:"password",hint:e("div",null,i.get(p.FORGOT_PASSWORD_TEXT)," ",e("amplify-button",{variant:"anchor",onClick:()=>this.handleAuthStateChange(h.ForgotPassword),"data-test":"sign-in-forgot-password-link"},i.get(p.RESET_PASSWORD_TEXT))),required:!0,handleInputChange:this.handleFormFieldInput("password"),inputProps:{"data-test":"sign-in-password-input"}}),this.newFormFields=[...t]}else this.formFields.forEach(t=>{const e=Object.assign({},t);e.handleInputChange=e=>this.handleFormFieldInputWithCallback(e,t),this.newFormFields.push(e)})}render(){return e("amplify-form-section",{headerText:this.headerText,handleSubmit:this.handleSubmit,testDataPrefix:"sign-in"},e("amplify-federated-buttons",{handleAuthStateChange:this.handleAuthStateChange,federated:this.federated}),!s(this.federated)&&e("amplify-strike",null,"or"),e("amplify-auth-fields",{formFields:this.newFormFields}),e("div",{slot:"amplify-form-section-footer",class:"sign-in-form-footer"},e("span",null,i.get(p.NO_ACCOUNT_TEXT)," ",e("amplify-button",{variant:"anchor",onClick:()=>this.handleAuthStateChange(h.SignUp),"data-test":"sign-in-create-account-link"},i.get(p.CREATE_ACCOUNT_TEXT))),e("amplify-button",{type:"submit",disabled:this.loading,"data-test":"sign-in-sign-in-button"},e("amplify-loading-spinner",{style:{display:this.loading?"initial":"none"}}),e("span",{style:{display:this.loading?"none":"initial"}},this.submitButtonText))))}};q.style=":host{--footer-size:var(--amplify-text-sm);--footer-color:var(--amplify-grey);--footer-font-family:var(--amplify-font-family)}.sign-in-form-footer{font-family:var(--footer-font-family);font-weight:300;font-size:var(--footer-size);color:var(--footer-color);margin-bottom:10px;display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}@media (min-width: 672px){.sign-in-form-footer{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:baseline;align-items:baseline}}.sign-in-form-footer *+*{margin-bottom:15px}";const F=class{constructor(e){t(this,e),this.handleSubmit=t=>this.signUp(t),this.headerText=i.get(p.SIGN_UP_HEADER_TEXT),this.submitButtonText=i.get(p.SIGN_UP_SUBMIT_BUTTON_TEXT),this.haveAccountText=i.get(p.SIGN_UP_HAVE_ACCOUNT_TEXT),this.signInText=i.get(p.SIGN_IN_TEXT),this.formFields=[],this.handleAuthStateChange=y,this.usernameAlias="username",this.newFormFields=[],this.phoneNumber={countryDialCodeValue:c,phoneNumberValue:null},this.loading=!1,this.signUpAttributes={username:"",password:"",attributes:{}}}handleFormFieldInputChange(t){switch(t){case"username":return t=>this.signUpAttributes.username=t.target.value;case"password":return t=>this.signUpAttributes.password=t.target.value;case"email":return t=>this.signUpAttributes.attributes.email=t.target.value;case"phone_number":return t=>this.handlePhoneNumberChange(t);default:return e=>this.signUpAttributes.attributes[t]=e.target.value}}handleFormFieldInputWithCallback(t,e){(e.handleInputChange?e.handleInputChange:(t,e)=>{e(t)})(t,("phone_number"===e.type?t=>this.signUpAttributes.attributes.phone_number=t.target.value:this.handleFormFieldInputChange(e.type)).bind(this))}handlePhoneNumberChange(t){const e=t.target.name,i=t.target.value;e===d&&(this.phoneNumber.countryDialCodeValue=i),e===m&&(this.phoneNumber.phoneNumberValue=i)}async signUp(t){if(t&&t.preventDefault(),!f||"function"!=typeof f.signUp)throw new Error(u);switch(this.phoneNumber.phoneNumberValue&&(this.signUpAttributes.attributes.phone_number=w(this.phoneNumber)),this.usernameAlias){case"email":case"phone_number":this.signUpAttributes.username=this.signUpAttributes.attributes[this.usernameAlias]}try{const t=await f.signUp(this.signUpAttributes);this.handleAuthStateChange(h.ConfirmSignUp,Object.assign(Object.assign({},t.user),{signUpAttrs:this.signUpAttributes}))}catch(e){b(e)}}async componentWillLoad(){if(g(this.usernameAlias),0===this.formFields.length)switch(this.usernameAlias){case"email":this.newFormFields=[{type:"email",placeholder:i.get(p.SIGN_UP_EMAIL_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"sign-up-email-input"}},{type:"password",placeholder:i.get(p.SIGN_UP_PASSWORD_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("password"),inputProps:{"data-test":"sign-up-password-input"}},{type:"phone_number",required:!0,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"sign-up-phone-number-input"}}];break;case"phone_number":this.newFormFields=[{type:"phone_number",required:!0,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"sign-up-phone-number-input"}},{type:"password",placeholder:i.get(p.SIGN_UP_PASSWORD_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("password"),inputProps:{"data-test":"sign-up-password-input"}},{type:"email",placeholder:i.get(p.SIGN_UP_EMAIL_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"sign-up-email-input"}}];break;case"username":default:this.newFormFields=[{type:"username",placeholder:i.get(p.SIGN_UP_USERNAME_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("username"),inputProps:{"data-test":"sign-up-username-input"}},{type:"password",placeholder:i.get(p.SIGN_UP_PASSWORD_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("password"),inputProps:{"data-test":"sign-up-password-input"}},{type:"email",placeholder:i.get(p.SIGN_UP_EMAIL_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"sign-up-email-input"}},{type:"phone_number",required:!0,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"sign-up-phone-number-input"}}]}else this.formFields.forEach(t=>{const e=Object.assign({},t);e.handleInputChange=e=>this.handleFormFieldInputWithCallback(e,t),this.newFormFields.push(e)})}render(){return e("amplify-form-section",{headerText:this.headerText,handleSubmit:this.handleSubmit,testDataPrefix:"sign-up"},e("amplify-auth-fields",{formFields:this.newFormFields}),e("div",{class:"sign-up-form-footer",slot:"amplify-form-section-footer"},e("span",null,this.haveAccountText," ",e("amplify-button",{variant:"anchor",onClick:()=>this.handleAuthStateChange(h.SignIn),"data-test":"sign-up-sign-in-link"},this.signInText)),e("amplify-button",{type:"submit","data-test":"sign-up-create-account-button"},e("amplify-loading-spinner",{style:{display:this.loading?"initial":"none"}}),e("span",{style:{display:this.loading?"none":"initial"}},this.submitButtonText))))}};F.style=":host{--footer-font-family:var(--amplify-font-family);--footer-font-size:var(--amplify-text-sm);--footer-color:var(--amplify-grey)}.sign-up-form-footer{font-family:var(--footer-font-family);font-weight:300;font-size:var(--footer-font-size);color:var(--footer-color);display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}@media (min-width: 672px){.sign-up-form-footer{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:baseline;align-items:baseline}}.sign-up-form-footer *+*{margin-bottom:15px}";const j=class{constructor(e){t(this,e),this.message=""}render(){return e("div",{class:"toast"},e("amplify-icon",{class:"toast-icon",name:"warning"}),this.message?e("span",null,this.message):null,e("slot",null),e("button",{class:"toast-close",onClick:this.handleClose}))}};j.style=':host{--background-color:var(--amplify-secondary-tint);--color:var(--amplify-white);--font-size:var(--amplify-text-sm);--font-family:var(--amplify-font-family);--close-icon-color:var(--amplify-white);--close-icon-hover:var(--amplify-red)}.toast-icon{padding-right:5px}.toast{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;position:absolute;top:0;left:0;width:100%;z-index:99;-webkit-box-shadow:0 0 5px 0 rgba(0, 0, 0, 0.3);box-shadow:0 0 5px 0 rgba(0, 0, 0, 0.3);padding:16px;background-color:var(--background-color);font-size:var(--font-size);color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:5px;font-family:var(--font-family)}.toast>span{margin-right:10px}.toast-close{margin-left:auto;-ms-flex-item-align:center;align-self:center;position:relative;width:18px;height:18px;overflow:hidden;cursor:pointer;background:transparent;border:none}.toast-close::before,.toast-close::after{content:"";position:absolute;height:2px;width:100%;top:50%;left:0;margin-top:-1px;background:var(--close-icon-color)}.toast-close:hover::before,.toast-close:hover::after{background:var(--close-icon-hover)}.toast-close::before{-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.toast-close::after{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}';const E=new n("AmplifyVerifyContact"),T=class{constructor(e){t(this,e),this.handleAuthStateChange=y,this.loading=!1}handleSubmit(t){t.preventDefault();const e=t.target;this.verifyAttr?this.submit(e.code.value):this.verify(e.contact.value)}async submit(t){const e=this.verifyAttr;if(!f||"function"!=typeof f.verifyCurrentUserAttributeSubmit)throw new Error(u);try{const i=await f.verifyCurrentUserAttributeSubmit(e,t);E.debug(i),this.handleAuthStateChange(h.SignedIn,this.user),this.verifyAttr=null}catch(i){E.error(i)}}async verify(t){if(t){if(!f||"function"!=typeof f.verifyCurrentUserAttribute)throw new Error(u);this.loading=!0;try{const e=await f.verifyCurrentUserAttribute(t);E.debug(e),this.verifyAttr=t}catch(e){E.error(e)}finally{this.loading=!1}}else E.error("Neither Email nor Phone Number selected")}renderSubmit(){return e("div",null,e("amplify-input",{inputProps:{autocomplete:"off"},name:"code",placeholder:i.get(p.CODE_PLACEHOLDER)}))}renderVerify(){const t=this.user;if(!t)return E.debug("No user to verify"),null;const{unverified:s}=t;if(!s)return E.debug("Unverified variable does not exist on user"),null;const{email:n,phone_number:a}=s;return e("div",null,n&&e("amplify-radio-button",{label:i.get(p.VERIFY_CONTACT_EMAIL_LABEL),key:"email",name:"contact",value:"email"}),a&&e("amplify-radio-button",{label:i.get(p.VERIFY_CONTACT_PHONE_LABEL),key:"phone_number",name:"contact",value:"phone_number"}))}render(){return e("amplify-form-section",{handleSubmit:t=>this.handleSubmit(t),headerText:i.get(p.VERIFY_CONTACT_HEADER_TEXT),loading:this.loading,secondaryFooterContent:e("span",null,e("amplify-button",{variant:"anchor",onClick:()=>this.handleAuthStateChange(h.SignedIn,this.user)},"Skip")),submitButtonText:i.get(this.verifyAttr?p.VERIFY_CONTACT_SUBMIT_LABEL:p.VERIFY_CONTACT_VERIFY_LABEL)},this.verifyAttr?this.renderSubmit():this.renderVerify())}};export{x as amplify_confirm_sign_in,C as amplify_confirm_sign_up,k as amplify_forgot_password,I as amplify_require_new_password,q as amplify_sign_in,F as amplify_sign_up,j as amplify_toast,T as amplify_verify_contact}